#include "stdafx.h"
#include "WrapperWuManber.h"

using namespace System::Runtime::InteropServices;

WrapperWMander::WrapperWuManber::WrapperWuManber()
{
	myWuManber = new WuManber();
}

WrapperWMander::WrapperWuManber::~WrapperWuManber()
{
	myWuManber->~WuManber();
}

void WrapperWMander::WrapperWuManber::InitializeWrapper(System::Collections::Generic::List<System::String^>^ list, bool bCaseSensitive, bool bIncludeSpecialCharacters, bool bIncludeExtendedAscii)
{
	vector<const char*> patterns;
	for (size_t i = 0; i < list->Count; i++)
	{
		patterns.push_back(static_cast<const char*>(Marshal::StringToHGlobalAnsi(list[i]).ToPointer()));
	}
	myWuManber->Initialize(patterns);
}

bool WrapperWMander::WrapperWuManber::SearchWrapper(int TextLength, System::String^ Text, System::Collections::Generic::List<System::String^>^ list)
{
	vector<const char*> patterns;
	for (size_t i = 0; i < list->Count; i++)
	{
		patterns.push_back(static_cast<const char*>(Marshal::StringToHGlobalAnsi(list[i]).ToPointer()));
	}
	return myWuManber->Search(TextLength, static_cast<const char*>(Marshal::StringToHGlobalAnsi(Text).ToPointer()), patterns);
}